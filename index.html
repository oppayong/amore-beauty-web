<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>A More Beauty</title>
    <style>
        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            overflow: hidden; background-color: #F9F7F5;
        }
        #loader {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #F9F7F5; display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            color: #C4A484; font-family: sans-serif; z-index: 10;
        }
        iframe { width: 100%; height: 100%; border: none; display: none; }
    </style>
</head>
<body>
    <div id="loader">
        <div style="font-size: 1.2rem; margin-bottom: 10px;">A More Beauty</div>
        <div style="font-size: 0.8rem; color: #999;">æ­£åœ¨ç‚ºæ‚¨é€£ç·šé ç´„ç³»çµ±...</div>
    </div>

    <iframe id="app-frame" sandbox="allow-scripts allow-same-origin allow-forms allow-popups allow-top-navigation-by-user-activation"></iframe>

    <script>
        // âš ï¸ è«‹å‹™å¿…å¡«å…¥ä½ çš„ Google Apps Script ç¶²å€ (çµå°¾æ˜¯ /exec)
        const gasUrl = "https://script.google.com/macros/s/AKfycby0hXP3i07bmZ0PiMyAV9CLUMa6oglQIaEAi_C-5o5-bi81OrRcOfHNH-9TtH6Hxdqs/exec";
        
        // æŠ“å–ç¶²å€åƒæ•¸
        const currentParams = window.location.search;
        const finalUrl = gasUrl + currentParams;

        // åµæ¸¬æ˜¯å¦ç‚º Instagram æˆ– Facebook çš„å…§å»ºç€è¦½å™¨
        const ua = navigator.userAgent || navigator.vendor || window.opera;
        const isInstagram = (ua.indexOf('Instagram') > -1) || (ua.indexOf('FBAN') > -1) || (ua.indexOf('FBAV') > -1);

        if (isInstagram) {
            // ğŸš¨ å¦‚æœæ˜¯ IG/FBï¼Œç›´æ¥è·³è½‰ (æ”¾æ£„ iframeï¼Œä¿è­‰èƒ½é–‹)
            document.getElementById('loader').innerHTML += '<br><div style="font-size:0.7rem;">æ­£åœ¨è·³è½‰è‡³å®‰å…¨é é¢...</div>';
            window.location.href = finalUrl;
        } else {
            // âœ… å¦‚æœæ˜¯æ­£å¸¸ç€è¦½å™¨ï¼Œä½¿ç”¨ iframe (ä¿æŒæ¼‚äº®ç¶²å€)
            const iframe = document.getElementById('app-frame');
            iframe.src = finalUrl;
            iframe.style.display = 'block';
            
            iframe.onload = function() {
                // éš±è—è®€å–ç•«é¢
                document.getElementById('loader').style.display = 'none';
            };
        }
    </script>
</body>
</html>
